clear;
clc;
p1 = [-1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1;
      -1 -1 -1 1 1 1 1 -1 -1 -1; 
      -1 -1 -1 1 1 1 1 -1 -1 -1 ];

p2 = [1 1  1  1  1  1 -1 -1 -1 -1;
      1 1  1  1  1  1 -1 -1 -1 -1;
      1 1 -1 -1 -1 -1 -1 -1 -1 -1;
      1 1 -1 -1 -1 -1 -1 -1 -1 -1;
      1 1  1  1  1  1 -1 -1 -1 -1;
      1 1  1  1  1  1 -1 -1 -1 -1;
      1 1 -1 -1  1  1 -1 -1 -1 -1;
      1 1 -1 -1  1  1 -1 -1 -1 -1;
      1 1 -1 -1  1  1 -1 -1 -1 -1;
      1 1 -1 -1  1  1 -1 -1 -1 -1;
      1 1  1  1  1  1 -1 -1 -1 -1;
      1 1  1  1  1  1 -1 -1 -1 -1];

p3 = [-1  1  1 -1 -1 -1 -1 1 1 -1;
      -1  1  1 -1 -1 -1 -1 1 1 -1;
      -1  1  1 -1 -1 -1 -1 1 1 -1;
      -1  1  1 -1 -1 -1 -1 1 1 -1;
      -1  1  1 -1 -1 -1 -1 1 1 -1;
      -1  1  1  1  1  1  1 1 1 -1;
      -1  1  1  1  1  1  1 1 1 -1;
      -1 -1 -1 -1 -1 -1 -1 1 1 -1;
      -1 -1 -1 -1 -1 -1 -1 1 1 -1;
      -1 -1 -1 -1 -1 -1 -1 1 1 -1;
      -1 -1 -1 -1 -1 -1 -1 1 1 -1;
      -1 -1 -1 -1 -1 -1 -1 1 1 -1];   

T = [p1(:),p2(:),p3(:)];
net = newhop(T);

display(net);
view(net);
%1.2
X = sim(net, {1 100}, [], p1(:));
X = reshape(X{100},12,10);
X(X >= 0) = 2;
X(X < 0) = 1;
%1.3
map = [1,1,1;0,0,0];
figure;
image(X);
colormap(map)
axis off
axis image
%1.4
r = rand(12,10);
input = p2;
for i=1:12
    for j=1:10
        if r(i,j) < 0.2
            input(i, j) = -input(i,j);  
        end
    end
end
X = input;
X(X >= 0) = 2;
X(X < 0) = 1;
map = [1,1,1;0,0,0];
figure;
image(X);
colormap(map)
axis off
axis image

X = sim(net, {1 100}, [], input(:));
X = reshape(X{100},12,10);
X(X >= 0) = 2;
X(X < 0) = 1;

map = [1,1,1;0,0,0];
figure;
image(X);
colormap(map)
axis off
axis image

%1.5
r = rand(12,10);
input = p3;
for i=1:12
    for j=1:10
        if r(i,j) < 0.3
            input(i, j) = -input(i,j);  
        end
    end
end
X = input;
X(X >= 0) = 2;
X(X < 0) = 1;
map = [1,1,1;0,0,0];
figure;
image(X);
colormap(map)
axis off
axis image

X = sim(net, {1 600}, [], input(:));
X = reshape(X{600},12,10);
X(X >= 0) = 2;
X(X < 0) = 1;

map = [1,1,1;0,0,0];
figure;
image(X);
colormap(map)
axis off
axis image




